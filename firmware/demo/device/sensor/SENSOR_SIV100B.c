#include "cmos_sensor.h"

#if DEV_SENSOR_SIV100B >0

SENSOR_INIT_SECTION const unsigned char SIV100BInitTable[]=
{
    0x3,0x02,

    0x04,0x03, //mirror 03 00

    0x05,0x07,	
    0x06,0x00,		
    0x07,0x00,		
    0x08,0x00,		
    0x09,0x00,		
    0x0a,0x00,		
    0x0b,0x00,		
    0x0c,0x00,		
    0x0d,0x00,		
    0x0e,0x00,		
    0x0f,0x00,
    0x10,0x13,		
    0x11,0x04,	
    0x12,0x0a,	
    0x13,0x1f,		
    0x14,0x17,		
    0x15,0x00,	
    0x16,0x89,		
    0x17,0x60,		
    0x18,0x16,		
    0x19,0x00,	
    0x1a,0x00,	
    0x1b,0x90,		
    0x1c,0x00,	
    0x1d,0x00,	
    0x1e,0x00,	
    0x1f,0x52,		
    0x20,0x00, //0X00	
    0x21,0xA0, 	//00
    0x22,0x7C,//61		
    0x23,0x00, // 0X00	
    0x24,0xA0, //00	
    0x25,0x7D,//67		
//    0x30,0x0, //0x1f4	
//    0x31,0x96,		
//    0x32,0x24,	
    0x34,0x7D,	
    0x33,0x05,		
	
    0x35,0x7D,		
    0x36,0x7d,		
    0x37,0x7d,	
    0x38,0x00,	
    0x39,0x00,	
    0x3a,0x00,	
    0x3b,0x00,	
    0x3c,0x00,	
    0x3d,0x00,	
    0x3e,0x00,	
    0x3f,0x00,	
    0x40, 0x81,
    0x41, 0x8A,
    0x42, 0x78,
    0x43, 0xC0,
    0x44, 0x38,	//0x48
    0x45, 0x28,
    0x46, 0x08,
    0x47, 0x15,
    0x48, 0x1E,
    0x49, 0x13,
    0x4A, 0x63,
    0x4B, 0xC4,
    0x4C, 0x3C,
    0x4E, 0x17,
    0x4F, 0x8A,
    0x50, 0x94,
    0x5A, 0x00,
//    0x51,0x60,		
//    0x52,0x90,		
//    0x53,0x70,
//    0x5a,0x0,	
//    0x5b,0x2,	
//    0x5c,0x33,		
//    0x5d,0xf8,		
//    0x5e,0x0,	
//    0x5f,0x0,	
    0x60, 0xC0,	//0xC8
    0x61, 0x88,	//0x88
    0x62, 0x01,
    0x63, 0x80,
    0x64, 0x80,
    0x65, 0xD0,
    0x66, 0x8C,
    0x67, 0xe8,
    0x68, 0x8B,
    0x69, 0x8A,
    0x6A, 0x73,
    0x6B, 0xa0,	//0x95
    0x6C, 0x70,
    0x6D, 0x88,
    0x6E, 0x77,
    0x6F, 0x46,
    0x70, 0xEA,
    0x71, 0x60,
    0x72, 0x05,
    0x73, 0x02,
    0x74, 0x0a,
    0x75, 0x0F,
    0x76, 0x20,
    0x77, 0xB7,
    0x78, 0xb5,
    0x80,0xaf,		
    0x81,0x19,		
    0x82,0x3d,		
    0x83,0x0,	
    0x84,0xff,		
    0x85,0x0,	
    0x86,0xa1,		
    0x87,0x00, 
    0x88,0x24,		
    0x89,0xf,	
    0x8a,0x80,		
    0x8b,0x80,		
    0x8c,0x80,		
    0x8d,0x80,		
    0x8e,0x0,	
    0x8f,0x0,	
    0x90,0x0,	
    0x91,0x0,	
    0x92,0x44,		
    0x93,0x10,		
    0x94,0x20,		
    0x95,0x18,		
    0x96,0x10,		
    0x97,0x20,		
    0x98,0x20,		
    0x99,0x18,		
    0x9a,0x50,		
    0x9b,0x0,	
    0x9c,0xd,	
    0x9d,0xd,	
    0x9e,0xd,	
    0x9f,0xd,	
    0xa0,0x10,		
    0xa1,0x10,		
    0xa2,0x10,		
    0xa3,0x10,		
    0xa4,0xcc,		
    0xa5,0xcc,		
    0xa6,0xcc,		
    0xa7,0xcb,		
    0xa8,0xa9,		
    0xa9,0x43, //0x45 	navy20150729	
    0xaa,0x45, //0x47	navy20150729	
    0xab,0x11,		
    0xac,0x13,		
    0xad,0x0,	
    0xae,0x0,	
    0xaf,0x98,		
    0xb0,0x90,
    0xB1, 0x00,
    0xB2, 0x0D,	//0x08
    0xB3, 0x16,	//0x10
    0xB4, 0x2A,	//0x23
    0xB5, 0x48,	//0x45
    0xB6, 0x64,	//0x62
    0xB7, 0x79,	//0x78
    0xB8, 0x8C,	//0x8A
    0xB9, 0x9C,	//0x9B
    0xBA, 0xAA,	
    0xBB, 0xB6,	//0xB8
    0xBC, 0xCB,	//0xCE
    0xBD, 0xDE,	//0xE2
    0xBE, 0xF0,	//0xF3
    0xBF, 0xF8,	//0xFB
    0xC0, 0xFF,
/* Color Matrix */
    0xC1, 0x3A,	//0x3D
    0xC2, 0xCB,	//0xC6
    0xC3, 0xFB,	//0xFD
    0xC4, 0x10,
    0xC5, 0x21,
    0xC6, 0x10,
    0xC7, 0xF3,
    0xC8, 0xBD,
    0xC9, 0x50,
    0xca,0x90,		
    0xcf,0x20,		
    0xd0,0x20,		
    0xd1,0x28,		
    0xd2,0x86,		
    0xd3,0x0,
    0xcb,0x40,		
    0xcc,0x28,//0x20		
    0xcd,0x6,//0x06 denoise center	
    0xce,0x6,//0x06 
    0xd4,0x12,//0x16		
    0xd5,0x16,//0x14//0x12 //Cr	
    0xd6,0x18,//0x16 //0x16//Cb		
    0xd7,0x04,//0x08	
    0xd8,0x0,	
    0xd9,0x0,	
    0xda,0x0,	
    0xdb,0xff,		
    0xdc,0x0,	
    0xdd,0xff,		
    0xde,0x0,	
    0xdf,0xff,		
    0xe0,0x0,	
    0xE1, 0x27,	//0x24
    0xE2, 0x8A,	//0x58
    0xe3,0x0,	
    0xe4,0x0,	
    0xe5,0x0,	
    0xe6,0x44,		
    0xf0,0x24,		
    0xf1,0x0,	
    0xf2,0x80,		
    0xf3,0x0,	
    0xf4,0xe0,		
    0x03,0xc5,
    0x7a,0xa8,
    0x7b,0xb0,
    0x7c,0x80,
    0x40,0x80,
	
	
-1,-1};

static void SIV100B_rotate(u32 r)
{
	unsigned char buf[2];
	buf[0] = 0x04;		//0',180'
	buf[1] = 0x00|(r<<0);
	//	sensor_iic_enable();
	//	sensor_iic_info();
	sensor_iic_write(buf);
	// sensor_iic_disable();

}

static void SIV100B_hvblank(u32 h,u32 v)
{

	u32 i;
	const u8 t[][2] = {
		{0x01,h & 0xff},//0x6a//0xde //HB[7:0]
		{0x02,v & 0xff},  //0x0c //VB[7:0]
		{0x0f,((v >> 8)<<4)|(h >> 8)} //{0x0f,0x00}, //VB/HB [11:8]
	};
	//	sensor_iic_enable();
	//	sensor_iic_info();	
	for(i=0;i<3;i++)
		sensor_iic_write((u8 *)&t[i][0]);
	// sensor_iic_disable();

}

SENSOR_OP_SECTION const Sensor_Op_t SIV100B_cmd= 
{ 
	.typ = CSI_TYPE_YUV422,
	.pixelw = 640,
	.pixelh= 480, 
	.hsyn = 1,
	.vsyn = 1,
	.AVDD = SYS_VOL_V3_0,
	.DVDD = SYS_VOL_V1_5,
	.VDDIO = SYS_VOL_V2_8,
	.colrarray = 2,//0:_RGRG_ 1:_GRGR_,2:_BGBG_,3:_GBGB_
	.rotate_adapt = {0},
	.hvb_adapt = {42000000,1120,0,0,0xff,25,0},
	
//	.hvb_adapt = {21000000,1120,0,0,0xff,20,0},
	.mclk = 24000000,
	.p_fun_adapt = {NULL,NULL,NULL},
};

SENSOR_HEADER_ITEM_SECTION const Sensor_Init_t SIV100B_init=
{
	.sensor_struct_addr =	(u32 *)&SIV100B_cmd, 
	.sensor_struct_size = sizeof(Sensor_Op_t),
	.sensor_init_tab_adr =	(u32 *)SIV100BInitTable,     
	.sensor_init_tab_size = sizeof(SIV100BInitTable),
	.id               =	0x0c,               
	.w_cmd            =	0x66,               
	.r_cmd            =	0x67,               
	.addr_num         =	0x01,               
	.data_num         =	0x01,               
	.id_reg           =	0x01                
};


#endif

